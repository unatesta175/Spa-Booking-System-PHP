# üå∏ Kapas Beauty Spa - Complete Booking & E-Commerce System

<div align="center">

![Kapas Beauty Spa](images/kapas-new-logo.png)

**A Full-Featured Spa Management & E-Commerce Platform**

[![PHP](https://img.shields.io/badge/PHP-8.x-777BB4?style=for-the-badge&logo=php&logoColor=white)](https://www.php.net/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-4479A1?style=for-the-badge&logo=mysql&logoColor=white)](https://www.mysql.com/)
[![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![Bootstrap](https://img.shields.io/badge/Bootstrap-5-7952B3?style=for-the-badge&logo=bootstrap&logoColor=white)](https://getbootstrap.com/)
[![jQuery](https://img.shields.io/badge/jQuery-3.6-0769AD?style=for-the-badge&logo=jquery&logoColor=white)](https://jquery.com/)
[![License](https://img.shields.io/badge/License-MIT-green.svg?style=for-the-badge)](LICENSE)

**üöÄ Tech Highlights:** Pure PHP (No Frameworks) ‚Ä¢ PDO Prepared Statements ‚Ä¢ FullCalendar v6 ‚Ä¢ ToyyibPay Integration ‚Ä¢ RESTful APIs ‚Ä¢ Session-Based Auth

[Demo](#-screenshots) ‚Ä¢ [Features](#-features) ‚Ä¢ [Installation](#-installation) ‚Ä¢ [Documentation](#-documentation)

</div>

---

## üë®‚Äçüíª About This Project

This comprehensive spa booking and e-commerce system was **developed entirely from scratch** as a solo project during my internship at **Picrust** (February 2024 - July 2024).

> **‚ö†Ô∏è DISCLAIMER:** This project is developed **for educational and learning purposes only**. The logo, images, and brand assets used in this project are **not owned by me** and belong to their respective copyright holders. This is a portfolio project to demonstrate technical skills and is not intended for commercial use.

### üéØ The Challenge

I challenged myself to build a complete, production-ready web application **using pure PHP without any frameworks** to truly understand web development fundamentals and test my coding abilities.

### üí™ The Journey

- **Duration:** 4 months of intensive development
- **Solo Developer:** Muhammad Ilyas Bin Amran
- **Technology Choice:** Vanilla PHP (no Laravel, no CodeIgniter, no frameworks)
- **Learning Experience:** Deep dive into PHP fundamentals, security, architecture, and best practices
- **Outcome:** A fully functional, feature-rich system managing real business operations

> *"Building without frameworks taught me how frameworks actually work. Every feature, every security measure, every optimization - I built it myself and understood it completely."* 

---

## ‚ú® Features

### üë• Customer Portal

- **üîê User Authentication**
  - Secure registration and login system
  - Password encryption
  - Session management
  - Profile management
  
- **üíÜ Service Booking System**
  - Real-time availability checking
  - Interactive calendar interface (FullCalendar.js integration)
  - Multiple service categories:
    - Facial treatments
    - Body massage (Urutan Badan)
    - Sauna sessions
    - Foot treatments (Rawatan Kaki)
    - Cupping therapy (Bekam Sunnah)
    - Waxing services
    - Scrub treatments
    - And 6 more specialized services
  - Dynamic time slot management
  - Booking confirmation system

- **üõí E-Commerce Features**
  - Product catalog with image galleries
  - Shopping cart functionality
  - Wishlist system
  - Credit packages (top-up system)
  - Gift card purchasing
  - Promotional packages
  - Order tracking
  - Invoice generation

- **üí≥ Payment Integration**
  - ToyyibPay payment gateway
  - Secure transaction handling
  - Credit system for spa services
  - Order history

- **üì± User Experience**
  - Responsive design (mobile, tablet, desktop)
  - SweetAlert2 notifications
  - Swiper.js image sliders
  - Real-time search functionality
  - Category filtering
  - Quick view product previews

### üë®‚Äçüíº Admin Panel

- **üìä Dashboard**
  - Real-time statistics
  - Revenue tracking
  - Booking analytics
  - Customer insights

- **üìÖ Booking Management**
  - View all bookings
  - Calendar view
  - Booking status updates
  - Customer booking history
  - Time slot management

- **üõçÔ∏è Product Management**
  - CRUD operations for products
  - Image upload (up to 3 images per product)
  - Stock management
  - Price management
  - Product categorization

- **üíº Service Management**
  - Service catalog management
  - Duration settings
  - Pricing configuration
  - Service categorization

- **üéÅ Gift Card & Credit Management**
  - Gift card creation and tracking
  - Credit package management
  - Transaction history

- **üë• User Management**
  - Customer accounts management
  - Staff accounts management
  - Admin accounts management
  - Role-based access control

- **üìß Communication**
  - Customer messaging system
  - Notifications management

- **üìà Reports & Analytics**
  - Order reports
  - Booking records
  - Revenue reports

### üë®‚Äç‚öïÔ∏è Staff Panel

- **üìã Booking Overview**
  - Assigned appointments
  - Daily schedule
  - Calendar integration

- **üë§ Client Management**
  - View client details
  - Booking history
  - Client notes

- **üí∞ Financial Management**
  - Credit tracking
  - Service pricing
  - Gift card validation

- **üîß Profile Management**
  - Personal information
  - Password change
  - Work schedule

---

## üíª Technologies, Frameworks & Tools

### Backend
- **PHP 8.x** - Server-side logic using both Procedural & OOP paradigms
- **MySQL 8.0** - Relational database management
- **PDO (PHP Data Objects)** - Secure database operations with prepared statements
- **Session-based Authentication** - User authorization and access control
- **RESTful API Endpoints** - Custom AJAX endpoints for dynamic functionality
- **cURL** - HTTP client for API communication

### Frontend
- **HTML5** - Semantic markup and modern web standards
- **CSS3** - Advanced styling with custom properties
  - CSS Variables for dynamic theming
  - Custom animations and transitions
  - Mobile-first responsive design
- **JavaScript (ES6+)** - Modern client-side programming
  - Arrow functions, async/await
  - Template literals
  - Modules and classes
- **Bootstrap 5** - Responsive UI framework for consistent components

### JavaScript Libraries & Plugins
- **jQuery** - Simplified DOM manipulation and AJAX requests
- **FullCalendar v6** - Interactive booking calendar visualization with drag-and-drop
- **SweetAlert2** - Modern, customizable alert and confirmation dialogs
- **Flatpickr** - Advanced date/time picker with Malay localization support
- **Swiper.js** - Touch-enabled, mobile-friendly product image sliders
- **Moment.js** - Date/time manipulation, parsing, and formatting
- **DataTables** - Advanced table features with:
  - Real-time sorting and filtering
  - Pagination
  - Search functionality
  - Export capabilities
- **Font Awesome 6** - Comprehensive icon library (1000+ icons)

### Third-Party Integration
- **ToyyibPay Payment Gateway** - Secure payment processing for Malaysian market
  - Online banking (FPX)
  - Credit/debit card support
  - E-wallet integration
- **cURL** - API communication and HTTP requests

### Development Tools & Environment
- **XAMPP** - Cross-platform development stack
  - Apache Web Server
  - MySQL Database Server
  - PHP Interpreter
  - phpMyAdmin for database management
- **Git** - Version control and collaborative development
- **JSON** - Data serialization for API responses and configuration

### Security Features
- **Environment Variable Management** - Secure credential storage (.env)
- **SQL Injection Prevention** - PDO prepared statements throughout
- **XSS Protection** - `htmlspecialchars()` and input sanitization
- **Session Security** - Secure session handling and regeneration
- **Password Hashing** - Encrypted password storage
- **Input Validation** - Server-side and client-side validation
- **CSRF Protection** - Token-based form security (recommended for future enhancement)

---

### API Endpoints (AJAX)

```php
// Booking System APIs
GET  /getTimeslot.php              // Fetch available time slots
GET  /getDuration.php              // Get service duration
POST /getBookingInsertion.php      // Create new booking
GET  /getInitialTimeslot.php       // Load initial calendar data

// Admin Panel APIs
GET  /admin/ajax-viewclient.php    // Client details modal
GET  /admin/ajax-viewstaff.php     // Staff details modal
POST /admin/insert-data.php        // Insert records
POST /admin/update-data.php        // Update records

// Shopping Cart APIs
POST /components/wishlist_cart.php // Add to cart/wishlist
```

---

## üìã System Requirements

- **PHP:** 8.0 or higher
- **MySQL:** 8.0 or higher
- **Apache/Nginx:** Latest stable version
- **Web Server:** XAMPP, WAMP, LAMP, or LEMP stack
- **Browser:** Modern browsers (Chrome, Firefox, Safari, Edge)

---

## üöÄ Installation

### 1Ô∏è‚É£ Clone or Download

```bash
# Clone the repository
git clone https://github.com/yourusername/kapasbeautyspa.com.git

# Or download and extract the ZIP file
```

### 2Ô∏è‚É£ Setup Environment File

```bash
# Windows Command Prompt
copy env.template .env

# Windows PowerShell
Copy-Item env.template .env

# Linux/Mac
cp env.template .env
```

### 3Ô∏è‚É£ Configure Database

Edit the `.env` file:

```env
# Database Configuration
DB_HOST=localhost
DB_NAME=spa_db
DB_USER=root
DB_PASS=

# ToyyibPay API (update with your credentials)
TOYYIBPAY_SECRET_KEY=your_secret_key_here
TOYYIBPAY_CATEGORY_CODE=your_category_code_here

# Application Settings
APP_ENV=development
APP_DEBUG=true
```

### 4Ô∏è‚É£ Import Database

1. Start your MySQL server
2. Create a database named `spa_db`
3. Import the database schema:
   - Access phpMyAdmin: `http://localhost/phpmyadmin`
   - Select the `spa_db` database
   - Import the SQL file (if provided) or create tables manually

### 5Ô∏è‚É£ Configure Web Server

#### For XAMPP:
1. Move the project to `C:\xampp\htdocs\`
2. Start Apache and MySQL from XAMPP Control Panel
3. Access the application at: `http://localhost/kapasbeautyspa.com/`


### 7Ô∏è‚É£ Access the Application

- **Main Website:** `http://localhost/kapasbeautyspa.com/`
- **Admin Panel:** `http://localhost/kapasbeautyspa.com/admin/`
- **Staff Panel:** `http://localhost/kapasbeautyspa.com/staff/`

---

## üìÅ Project Structure

```
kapasbeautyspa.com/
‚îú‚îÄ‚îÄ üìÇ admin/                    # Admin panel files
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.php           # Admin dashboard
‚îÇ   ‚îú‚îÄ‚îÄ booking.php             # Booking management
‚îÇ   ‚îú‚îÄ‚îÄ services.php            # Service management
‚îÇ   ‚îú‚îÄ‚îÄ products.php            # Product management
‚îÇ   ‚îú‚îÄ‚îÄ client-accounts.php     # Customer management
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ üìÇ staff/                    # Staff panel files
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.php           # Staff dashboard
‚îÇ   ‚îú‚îÄ‚îÄ booking.php             # View appointments
‚îÇ   ‚îú‚îÄ‚îÄ calendar.php            # Calendar view
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ üìÇ components/               # Reusable components
‚îÇ   ‚îú‚îÄ‚îÄ connect.php             # Database connection
‚îÇ   ‚îú‚îÄ‚îÄ env_loader.php          # Environment loader
‚îÇ   ‚îú‚îÄ‚îÄ user-header.php         # User header
‚îÇ   ‚îú‚îÄ‚îÄ admin_header.php        # Admin header
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ üìÇ css/                      # Stylesheets
‚îÇ   ‚îú‚îÄ‚îÄ style.css               # Main styles
‚îÇ   ‚îú‚îÄ‚îÄ admin_style.css         # Admin styles
‚îÇ   ‚îî‚îÄ‚îÄ staff_style.css         # Staff styles
‚îú‚îÄ‚îÄ üìÇ js/                       # JavaScript files
‚îÇ   ‚îú‚îÄ‚îÄ script.js               # Main scripts
‚îÇ   ‚îú‚îÄ‚îÄ admin_script.js         # Admin scripts
‚îÇ   ‚îî‚îÄ‚îÄ sweetalert2.all.min.js  # SweetAlert2
‚îú‚îÄ‚îÄ üìÇ images/                   # Static images
‚îú‚îÄ‚îÄ üìÇ uploaded_img/             # User uploaded images
‚îú‚îÄ‚îÄ üìÇ font/                     # Custom fonts (Gilroy)
‚îú‚îÄ‚îÄ index.php                    # Homepage
‚îú‚îÄ‚îÄ booking.php                  # Booking page
‚îú‚îÄ‚îÄ shop.php                     # Shop page
‚îú‚îÄ‚îÄ cart.php                     # Shopping cart
‚îú‚îÄ‚îÄ user-login.php               # Customer login
‚îú‚îÄ‚îÄ user-register.php            # Customer registration
‚îú‚îÄ‚îÄ .env                         # Environment variables (create from template)
‚îú‚îÄ‚îÄ env.template                 # Environment template
‚îî‚îÄ‚îÄ README.md                    # This file
```

---

## üîí Security Features

### Implemented Security Measures

1. **SQL Injection Prevention**
   - All database queries use PDO prepared statements
   - No raw SQL queries with user input

2. **Cross-Site Scripting (XSS) Protection**
   - All user inputs sanitized with `htmlspecialchars()`
   - Output escaping on all dynamic content

3. **Session Security**
   - Secure session management
   - Session regeneration on login
   - Automatic logout on inactivity

4. **Environment Variables**
   - Sensitive data stored in `.env` file
   - `.env` excluded from version control
   - Easy configuration management

5. **Password Security**
   - Password hashing (recommended to upgrade to password_hash())
   - No plain text storage

6. **Input Validation**
   - Server-side validation on all forms
   - Type checking and sanitization
   - Maximum length enforcement


---

## üìñ Documentation

### Database Schema

The system uses the following main tables:

- **clients** - Customer information
- **admins** - Administrator accounts
- **staff** - Staff accounts
- **services** - Spa services catalog
- **products** - E-commerce products
- **giftcards** - Gift card products
- **credits** - Credit packages
- **bookings** - Service bookings
- **orders** - Product orders
- **cart** - Shopping cart items
- **wishlist** - Customer wishlists
- **messages** - Customer messages

### Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `DB_HOST` | Database host | `localhost` |
| `DB_NAME` | Database name | `spa_db` |
| `DB_USER` | Database username | `root` |
| `DB_PASS` | Database password | _(empty)_ |
| `TOYYIBPAY_SECRET_KEY` | Payment gateway secret | _(your key)_ |
| `TOYYIBPAY_CATEGORY_CODE` | Payment category code | _(your code)_ |
| `APP_ENV` | Environment mode | `development` |
| `APP_DEBUG` | Debug mode | `true` |


---

## üé® Screenshots

### Customer Interface

#### Homepage
![Homepage](project%20images/homepage.webp)

#### Service Booking
![Booking System](project%20images/booking.webp)

#### Shopping Cart
![Shopping Cart](project%20images/cart.webp)

### Admin Panel

#### Dashboard
![Admin Dashboard](project%20images/admin-dashboard.webp)

#### Booking Management
![Booking Management](project%20images/booking-management.webp)

---


## ü§ù Contributing

This project was built as a solo internship project, but contributions are welcome!

### How to Contribute

1. Fork the project
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request


## üêõ Bug Reports

Found a bug? Please open an issue with:
- Description of the bug
- Steps to reproduce
- Expected behavior
- Actual behavior
- Screenshots (if applicable)
- Environment details (PHP version, browser, OS)

---

## üéØ Technical Challenges Overcome

### Complex Problems Solved

1. **Real-Time Booking System**
   - **Challenge**: Preventing double-bookings with concurrent users
   - **Solution**: Implemented transaction-based database locking and real-time availability checking via AJAX
   - **Technology**: PDO transactions + FullCalendar v6 + custom AJAX endpoints

2. **Dynamic Time Slot Generation**
   - **Challenge**: Calculate available slots based on service duration and existing bookings
   - **Solution**: Built algorithm to parse booking data and generate available time slots dynamically
   - **Technology**: PHP date/time manipulation + Moment.js + Flatpickr

3. **Payment Gateway Integration**
   - **Challenge**: Integrate Malaysian payment processor without documentation
   - **Solution**: Reverse-engineered API calls using cURL and implemented callback handling
   - **Technology**: cURL + ToyyibPay API + webhook handling

4. **Multi-Role Authentication**
   - **Challenge**: Three separate user types (Customer, Admin, Staff) with different permissions
   - **Solution**: Session-based role management with middleware-like authentication checks
   - **Technology**: PHP Sessions + role-based access control

5. **Shopping Cart with Service Booking**
   - **Challenge**: Combine e-commerce (products) with service booking in one cart
   - **Solution**: Unified cart system handling both product quantities and service appointments
   - **Technology**: Session-based cart + PDO + AJAX

6. **Calendar Visualization**
   - **Challenge**: Display bookings in interactive calendar without framework
   - **Solution**: Integrated FullCalendar v6 with custom PHP backend and AJAX data fetching
   - **Technology**: FullCalendar + JSON API endpoints + MySQL queries

7. **Image Upload System**
   - **Challenge**: Multiple image uploads with validation and storage
   - **Solution**: Custom file upload handler with type checking, size limits, and secure storage
   - **Technology**: PHP file handling + server-side validation

8. **Responsive Design Without Framework**
   - **Challenge**: Mobile-first responsive design across 20+ pages
   - **Solution**: CSS Grid + Flexbox + media queries + Bootstrap 5 components
   - **Technology**: CSS3 + Bootstrap 5 + custom responsive utilities

### Performance Optimizations

- ‚úÖ **Database Indexing** - Optimized queries with proper indexes on foreign keys
- ‚úÖ **Prepared Statements** - All queries use PDO prepared statements (no performance penalty from mysqli)
- ‚úÖ **AJAX Loading** - Reduced page reloads with asynchronous data fetching
- ‚úÖ **Image Optimization** - Compressed images and lazy loading
- ‚úÖ **Session Caching** - Reduced database queries with session-stored user data
- ‚úÖ **Query Optimization** - Minimized N+1 queries with JOIN statements


---

## üìú License & Disclaimer

### Educational Use License

This project is developed for **educational and learning purposes only** as part of an internship project.

**Code License:** The source code is available under the MIT License for educational reference.

### ‚ö†Ô∏è Important Copyright Notice

**Assets & Brand Materials:**
- The **Kapas Beauty Spa logo** and brand name are **NOT owned by me**
- All **images, graphics, and visual assets** used in this project belong to their respective copyright holders
- The **ToyyibPay** brand and API belong to ToyyibPay Sdn Bhd
- This project uses these materials **strictly for educational demonstration purposes**

### Usage Restrictions

- ‚úÖ **Allowed:** Use the code for learning, study, and portfolio purposes
- ‚úÖ **Allowed:** Reference the architecture and implementation patterns
- ‚úÖ **Allowed:** Fork and modify for personal educational projects
- ‚ùå **NOT Allowed:** Commercial use without proper licensing
- ‚ùå **NOT Allowed:** Use of logo, images, or brand materials without permission from owners
- ‚ùå **NOT Allowed:** Claiming ownership of assets that belong to others

### Fair Use Statement

This project is created as a **portfolio demonstration** and **educational case study** to showcase:
- Web development skills
- Full-stack PHP programming
- System architecture design
- Problem-solving abilities

**If you are the copyright holder** of any assets used in this project and would like them removed, please contact me immediately.

---

### MIT License (Code Only)

```
MIT License

Copyright (c) 2024 Muhammad Ilyas Bin Amran

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

**Note:** This license applies to the source code only. Third-party libraries, logos, images, and brand materials retain their original licenses and copyrights.

---

## üë§ Author

**Muhammad Ilyas Bin Amran**

- üìß Email: [your-email@example.com]
- üíª GitHub: [@yourusername](https://github.com/unatesta175)
- üîó LinkedIn: [Your LinkedIn](https://linkedin.com/in/muhammad-ilyas-bin-amran-3a9a2a298)

---

## üôè Acknowledgments

### Technologies & Libraries Used
- [PHP](https://www.php.net/) - Server-side programming language
- [MySQL](https://www.mysql.com/) - Database management system
- [Bootstrap 5](https://getbootstrap.com/) - Responsive UI framework
- [jQuery](https://jquery.com/) - JavaScript library
- [FullCalendar v6](https://fullcalendar.io/) - Interactive calendar scheduling
- [Swiper.js](https://swiperjs.com/) - Touch-enabled slider
- [SweetAlert2](https://sweetalert2.github.io/) - Beautiful alert dialogs
- [Flatpickr](https://flatpickr.js.org/) - Date/time picker with localization
- [Moment.js](https://momentjs.com/) - Date/time manipulation
- [DataTables](https://datatables.net/) - Advanced table features
- [Font Awesome 6](https://fontawesome.com/) - Icon library
- [ToyyibPay](https://toyyibpay.com/) - Malaysian payment gateway
- [XAMPP](https://www.apachefriends.org/) - Development environment

### Special Thanks
- **Picrust** for the internship opportunity
- The PHP community for extensive documentation
- Stack Overflow for debugging help
- All the open-source library authors

---

## üìû Support

Need help? Have questions?

- üìß Email: muhammadilyasamran.com
- üí¨ Issues: [GitHub Issues](https://github.com/unatesta175/kapasbeautyspa.com/issues)
- üìñ Docs: [Read the Setup Guide](README_SETUP.md)

---

## üí∞ Hire Me

Looking for a developer who can build complex systems from scratch without relying on frameworks?

I've proven I can:
- ‚úÖ Build production-ready applications solo
- ‚úÖ Learn and implement new technologies quickly
- ‚úÖ Write clean, maintainable code
- ‚úÖ Understand systems at a fundamental level
- ‚úÖ Deliver complete projects on time

**Available for:**
- Freelance projects
- Full-time positions
- Contract work
- Consulting

Contact: [muhammadilyasamran.com]

---

<div align="center">

### ‚≠ê If you found this project interesting, please consider giving it a star!

**Built with üí™ and pure PHP by Muhammad Ilyas Bin Amran**

*4 months of coding, debugging, and learning - all to prove I could do it without frameworks.*

---

![Made with PHP](https://img.shields.io/badge/Made%20with-PHP-777BB4?style=for-the-badge&logo=php&logoColor=white)
![Made with Love](https://img.shields.io/badge/Made%20with-Love-red?style=for-the-badge&logo=heart&logoColor=white)
![No Frameworks](https://img.shields.io/badge/No-Frameworks-success?style=for-the-badge&logo=checkmarx&logoColor=white)

**¬© 2024 Muhammad Ilyas Bin Amran | All Rights Reserved**

</div>

